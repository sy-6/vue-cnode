(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45d5f848"],{"0cb2":function(e,t,n){var r=n("7b0b"),c=Math.floor,i="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,a=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,u,s,l){var p=n+e.length,f=u.length,d=a;return void 0!==s&&(s=r(s),d=o),i.call(l,d,(function(r,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(p);case"<":o=s[i.slice(1,-1)];break;default:var a=+i;if(0===a)return r;if(a>f){var l=c(a/10);return 0===l?r:l<=f?void 0===u[l-1]?i.charAt(1):u[l-1]+i.charAt(1):r}o=u[a-1]}return void 0===o?"":o}))}},"14c3":function(e,t,n){var r=n("c6b6"),c=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var i=n.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return c.call(e,t)}},3213:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.topic?n("div",[n("pane1",{scopedSlots:e._u([{key:"content",fn:function(){return[n("div",[n("h2",[e._v(e._s(e.topic.title))]),n("button",{on:{click:e.collect}},[e._v(" "+e._s(e.topic.is_collect?"取消收藏":"收藏")+" ")]),n("div",{domProps:{innerHTML:e._s(e.topic.content)}})])]},proxy:!0}],null,!1,2734177858)}),n("pane1",{scopedSlots:e._u([{key:"header",fn:function(){return[n("span",[e._v("回复")])]},proxy:!0},{key:"content",fn:function(){return[n("div",[e._l(e.topic.replies,(function(t){return n("div",{key:t.id},[n("img",{attrs:{width:"30px",src:t.author.avatar_url,alt:""}}),n("span",[e._v(e._s(t.author.loginname))]),n("span",{domProps:{innerHTML:e._s(t.content)}}),n("div",[n("button",{class:{"up-active":t.is_uped},on:{click:function(n){return e.upClick(t.id)}}},[e._v(" 点赞"+e._s(t.ups.length)+" ")]),e.isLogin?n("button",{on:{click:function(n){return e.otherSubmit(t)}}},[e._v("回复")]):e._e(),t.id===e.reply_id?n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reply_text,expression:"reply_text"}],ref:"textarea",refInFor:!0,domProps:{value:e.reply_text},on:{input:function(t){t.target.composing||(e.reply_text=t.target.value)}}}),n("button",{on:{click:function(n){return e.otherSubmit1(t.id)}}},[e._v("回复")])]):e._e()]),n("hr"),n("br")])})),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.text,expression:"text",modifiers:{trim:!0}}],domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),n("button",{on:{click:e.submit}},[e._v("回复")])])],2)]},proxy:!0}],null,!1,2952470117)})],1):e._e()},c=[],i=n("1da1"),o=(n("7db0"),n("a434"),n("ac1f"),n("5319"),n("96cf"),n("2bb4")),a={components:{Pane1:o["a"]},name:"Topic",computed:{isLogin:function(){return!0}},data:function(){return{topic:null,text:"",reply_id:"",reply_text:""}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.params.topicId,r=!0,c=r?"/topic/".concat(n,"?accesstoken=21fe023f-ef69-4e05-9150-426254895ca1"):"/topic/".concat(n),t.next=5,e.$axios.get(c);case 5:i=t.sent,console.log(i.data),e.topic=i.data;case 8:case"end":return t.stop()}}),t)})))()},methods:{getTopic:function(){},upClick:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(e),n.next=4,t.$axios.post("/reply/".concat(e,"/ups"),{accesstoken:"21fe023f-ef69-4e05-9150-426254895ca1"});case 4:r=n.sent,c="60969f644d20cb55bd691608",i=t.topic.replies.find((function(t){return t.id===e})),i.is_uped="up"===r.action,console.log(i.is_uped),"up"===r.action?i.ups.push(c):i.ups.splice(i.ups.indexOf("60969f644d20cb55bd691608"),1);case 10:case"end":return n.stop()}}),n)})))()},submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.text,!n){t.next=8;break}return t.next=4,e.$axios.post("/topic/".concat(e.topic.id,"/replies"),{accesstoken:"21fe023f-ef69-4e05-9150-426254895ca1",content:n});case 4:r=t.sent,c={id:r.reply_id,is_uped:!1,ups:[],content:"<p>".concat(n,"</p>"),author:{avatar_url:"https://avatars.githubusercontent.com/u/79734814?v=4&s=120",loginname:"sy-6"}},e.topic.replies.push(c),e.text="";case 8:case"end":return t.stop()}}),t)})))()},otherSubmit:function(e){console.log(t);var t=e.id,n=e.author;this.reply_id=t,this.reply_text="@".concat(n.loginname," "),this.$nextTick((function(){this.$refs.textarea[0].focus()}))},otherSubmit1:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.reply_text,n.next=3,t.$axios.post("/topic/".concat(t.topic.id,"/replies"),{accesstoken:"21fe023f-ef69-4e05-9150-426254895ca1",content:r,reply_id:e});case 3:c=n.sent,i={id:c.reply_id,is_uped:!1,ups:[],content:"<p>".concat(r.replace(/@[\w-]+ /,"<a href='/user/xxx'>@xxx</a>"),"</p>"),author:{avatar_url:"https://avatars.githubusercontent.com/u/79734814?v=4&s=120",loginname:"sy-6"}},t.topic.replies.push(i),t.reply_text="",t.reply_id="";case 8:case"end":return n.stop()}}),n)})))()},collect:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.topic,r=n.is_collect,c=n.id,console.log(r,c),i="21fe023f-ef69-4e05-9150-426254895ca1",!r){t.next=9;break}return t.next=6,e.$axios.post("/topic_collect/de_collect",{topic_id:c,accesstoken:i});case 6:e.topic.is_collect=!1,t.next=12;break;case 9:return t.next=11,e.$axios.post("/topic_collect/collect",{topic_id:c,accesstoken:i});case 11:e.topic.is_collect=!0;case 12:case"end":return t.stop()}}),t)})))()}}},u=a,s=(n("a092"),n("2877")),l=Object(s["a"])(u,r,c,!1,null,null,null);t["default"]=l.exports},5319:function(e,t,n){"use strict";var r=n("d784"),c=n("825a"),i=n("50c4"),o=n("a691"),a=n("1d80"),u=n("8aa5"),s=n("0cb2"),l=n("14c3"),p=Math.max,f=Math.min,d=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var v=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,x=r.REPLACE_KEEPS_$0,h=v?"$":"$0";return[function(n,r){var c=a(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,c,r):t.call(String(c),n,r)},function(e,r){if(!v&&x||"string"===typeof r&&-1===r.indexOf(h)){var a=n(t,e,this,r);if(a.done)return a.value}var g=c(e),_=String(this),m="function"===typeof r;m||(r=String(r));var b=g.global;if(b){var y=g.unicode;g.lastIndex=0}var E=[];while(1){var R=l(g,_);if(null===R)break;if(E.push(R),!b)break;var k=String(R[0]);""===k&&(g.lastIndex=u(_,i(g.lastIndex),y))}for(var w="",S=0,$=0;$<E.length;$++){R=E[$];for(var I=String(R[0]),T=p(f(o(R.index),_.length),0),P=[],A=1;A<R.length;A++)P.push(d(R[A]));var O=R.groups;if(m){var U=[I].concat(P,T,_);void 0!==O&&U.push(O);var C=String(r.apply(void 0,U))}else C=s(I,_,T,P,O,r);T>=S&&(w+=_.slice(S,T)+C,S=T+I.length)}return w+_.slice(S)}]}))},"7b61":function(e,t,n){},"7db0":function(e,t,n){"use strict";var r=n("23e7"),c=n("b727").find,i=n("44d2"),o="find",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},8418:function(e,t,n){"use strict";var r=n("c04e"),c=n("9bf2"),i=n("5c6c");e.exports=function(e,t,n){var o=r(t);o in e?c.f(e,o,i(0,n)):e[o]=n}},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},9263:function(e,t,n){"use strict";var r=n("ad6d"),c=n("9f7f"),i=n("5692"),o=RegExp.prototype.exec,a=i("native-string-replace",String.prototype.replace),u=o,s=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=c.UNSUPPORTED_Y||c.BROKEN_CARET,p=void 0!==/()??/.exec("")[1],f=s||p||l;f&&(u=function(e){var t,n,c,i,u=this,f=l&&u.sticky,d=r.call(u),v=u.source,x=0,h=e;return f&&(d=d.replace("y",""),-1===d.indexOf("g")&&(d+="g"),h=String(e).slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==e[u.lastIndex-1])&&(v="(?: "+v+")",h=" "+h,x++),n=new RegExp("^(?:"+v+")",d)),p&&(n=new RegExp("^"+v+"$(?!\\s)",d)),s&&(t=u.lastIndex),c=o.call(f?n:u,h),f?c?(c.input=c.input.slice(x),c[0]=c[0].slice(x),c.index=u.lastIndex,u.lastIndex+=c[0].length):u.lastIndex=0:s&&c&&(u.lastIndex=u.global?c.index+c[0].length:t),p&&c&&c.length>1&&a.call(c[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(c[i]=void 0)})),c}),e.exports=u},"9f7f":function(e,t,n){"use strict";var r=n("d039");function c(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=c("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=c("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a092:function(e,t,n){"use strict";n("7b61")},a434:function(e,t,n){"use strict";var r=n("23e7"),c=n("23cb"),i=n("a691"),o=n("50c4"),a=n("7b0b"),u=n("65f0"),s=n("8418"),l=n("1dde"),p=l("splice"),f=Math.max,d=Math.min,v=9007199254740991,x="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var n,r,l,p,h,g,_=a(this),m=o(_.length),b=c(e,m),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=m-b):(n=y-2,r=d(f(i(t),0),m-b)),m+n-r>v)throw TypeError(x);for(l=u(_,r),p=0;p<r;p++)h=b+p,h in _&&s(l,p,_[h]);if(l.length=r,n<r){for(p=b;p<m-r;p++)h=p+r,g=p+n,h in _?_[g]=_[h]:delete _[g];for(p=m;p>m-r+n;p--)delete _[p-1]}else if(n>r)for(p=m-r;p>b;p--)h=p+r-1,g=p+n-1,h in _?_[g]=_[h]:delete _[g];for(p=0;p<n;p++)_[p+b]=arguments[p+2];return _.length=m-r+n,l}})},ac1f:function(e,t,n){"use strict";var r=n("23e7"),c=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),c=n("d039"),i=n("b622"),o=n("9112"),a=i("species"),u=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),s=function(){return"$0"==="a".replace(/./,"$0")}(),l=i("replace"),p=function(){return!!/./[l]&&""===/./[l]("a","$0")}(),f=!c((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,l){var d=i(e),v=!c((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),x=v&&!c((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[a]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!v||!x||"replace"===e&&(!u||!s||p)||"split"===e&&!f){var h=/./[d],g=n(d,""[e],(function(e,t,n,r,c){return t.exec===RegExp.prototype.exec?v&&!c?{done:!0,value:h.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:s,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),_=g[0],m=g[1];r(String.prototype,e,_),r(RegExp.prototype,d,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}l&&o(RegExp.prototype[d],"sham",!0)}}}]);
//# sourceMappingURL=chunk-45d5f848.470c2ece.js.map